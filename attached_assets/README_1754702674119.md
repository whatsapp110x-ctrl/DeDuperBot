# Telegram Duplicate Cleaner Bot

This bot removes duplicate text, files, audio, video, and images in Telegram groups and channels.
It works on **Replit** and **Render** with no code changes.

## Features
- Monitors any group/channel it is in
- Deletes duplicates instantly (30-day memory)
- Limits storage to 10,000 entries per chat
- Responds only to admin commands
- Compatible with both Replit & Render
- Flask keep-alive server for 24/7 uptime
- Automatic cleanup of expired messages
- Memory management to prevent overflow

---

## Setup

### 1. Create a Telegram Bot
1. Open [@BotFather](https://t.me/BotFather).
2. Run `/newbot` → Follow instructions → Save the token.
3. Run `/setprivacy` → Choose your bot → **Disable** privacy mode.
4. Add the bot to your group/channel as **admin** with "Delete messages" permission.

---

### 2. Run on Replit
1. Fork this repo to your GitHub account.
2. Import it into [Replit](https://replit.com/).
3. Go to **Tools → Secrets** and add:
   - Key: `BOT_TOKEN`
   - Value: your token from BotFather.
4. Click **Run**.
5. (Optional) Use [UptimeRobot](https://uptimerobot.com/) to ping the `/` endpoint every 5 minutes for 24/7 uptime.

---

### 3. Deploy on Render
1. Push this repo to GitHub (if not already).
2. Go to [Render](https://render.com/).
3. Create **New Web Service**:
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `python main.py`
4. Add Environment Variable:
   ```
   BOT_TOKEN=your-bot-token-here
   ```
5. Deploy.

---

### 4. Commands
- `/startbot` — Activates duplicate detection in the chat (anyone can use)
- `/stopbot` — Deactivates duplicate detection and clears stored data (anyone can use)

---

### 5. How It Works
- **Duplicate Detection**: Creates SHA256 hashes of message content (text, files, media)
- **Memory Management**: Stores up to 10,000 messages per chat
- **Auto-Expiry**: Removes messages older than 30 days
- **Easy Control**: Anyone can control the bot with simple commands
- **Instant Deletion**: Removes duplicate messages immediately upon detection

---

### 6. Supported Content Types
- Text messages
- Photos/Images
- Videos
- Audio files
- Voice messages
- Documents/Files
- Stickers
- Animations/GIFs
- Video notes

---

### 7. Requirements
- Bot must be admin in the chat/channel
- Bot needs "Delete Messages" permission
- Anyone can use the bot commands

---

### 8. Technical Details
- **Language**: Python 3.8+
- **Framework**: python-telegram-bot v20.3
- **Web Server**: Flask (for keep-alive)
- **Storage**: In-memory (resets on restart)
- **Deployment**: Replit, Render, or any Python hosting service

---

### 9. Troubleshooting

**Bot not responding to commands:**
- Ensure bot is admin in the chat
- Check if privacy mode is disabled in BotFather
- Verify BOT_TOKEN is correctly set

**Bot not deleting duplicates:**
- Confirm bot has "Delete Messages" permission
- Make sure `/startbot` was executed by an admin
- Check bot logs for error messages

**Memory issues:**
- Bot automatically limits to 10,000 entries per chat
- Old messages (30+ days) are automatically cleaned up
- Restart the bot to clear all stored data

---

### 10. License
This project is open source. Feel free to modify and distribute.

---

## Quick Start
1. Get bot token from @BotFather
2. Set BOT_TOKEN environment variable
3. Run `python main.py`
4. Add bot as admin to your chat
5. Send `/startbot` in the chat
6. Done! Duplicates will be automatically removed.
